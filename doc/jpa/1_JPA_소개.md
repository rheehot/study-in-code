# 1. JPA 소개

--- 

# 기존 방식의 문제 핵심

- 애플리케이션의 비즈니스 로직보다 SQL과 JDBC API를 작성하는데 더 많은 시간을 보냈다.

# JPA를 사용하면

- CRUD 용 SQL을 작성할 필요가 없음
- 조회 결과를 객체로 매핑하는 작업도 대부분 자동으로 해줌
- 애플리케이션을 SQL이 아닌 객체 중심으로 개발하여 생산성과 유지보수성을 높이고, 테스트도 더 용이해짐
- 코드를 거의 수정하지 않고 DB를 손쉽게 변경할 수 있음

# SQL을 직접 다룰 때 발생하는 문제

- 비슷한 패턴의 CRUD 작성 코드가 반복, 반복
- 데이터 접근 계층에 SQL을 물리적으로 숨겨졌지만 비지니스 요구사항이 변경되면 DAO 안에 SQL 문을 함께 변경해야 한함
- 이는 진정한 의미의 계층 분할이 아님

# 패러다임의 불일치

### 1. 상속

- DB에서는 상속의 개념이 없음
- JPA는 저장 시, 두 테이블에 저장하는 SQL을 만들고, 조회 시 두 테이블을 조인해서 결과를 반환함

### 2. 연관관계

- 객체는 참조를 사용해 연관 관계를 가지고, 테이블은 왜래 키를 사용해 연관 관계를 가지고 조인을 사용해서 연관된 테이블을 조회함
- JPA는 저장 시, 객체 참조를 외래키로 변환하고 조회 시 외래키를 객체 참조로 변환해 준다.

### 3. 객체 그래프 탐색

- SQL을 직접 다루면 처음 실행하는 SQL에 따라 그래프를 어디까지 탐색할 수 있는지 정해짐
- JPA는 실제 객체를 참조하는 시점까지 데이터베이스 조회를 미루어 지연 로딩하거나, 연관된 객체를 즉시 함께 조회할 수 있음

### 4. 비교

- 데이터베이스는 기본 키 값으로 각 로우를 구분하지만 객체는 동일성 비교와 동등성 비교로 구 객체를 구분함
- JPA는 같은 트랜잭션일 때 같은 ID로 두 번 조회를 하면 같은 객체(동일성 비교)가 조회되는 것을 보장한다.